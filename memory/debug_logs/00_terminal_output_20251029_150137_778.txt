================================================================================
TERMINAL OUTPUT FOR THIS TURN
================================================================================
Timestamp: 2025-10-29 15:01:40
Turn ID: turn_20251029_150137_778
================================================================================

   ğŸ“ Debug: User query logged to 01_user_query_20251029_150137_778.txt
   ğŸ¤– Using GPT-4.1-nano keywords for retrieval: ['cars', 'interesting fact']
   ğŸ“š Step 2: Retrieving recent context...
ğŸ” Crawler: Searching with intent:
   Query Type: chat
   Keywords: ['cars', 'interesting fact']
ğŸ“‹ Found 0 active tasks
ğŸ“… Search range: ALL DAYS (unlimited)

ğŸ” VECTOR SEARCH (Primary Method):
   ğŸ” Ranked multi-keyword search: 'cars interesting fact...'
      Query keywords (3): ['cars', 'interesting', 'fact']
      Found 4 turns with keyword matches
   ğŸ¯ Top matches:
      1. score=6.05 | 2 kw matches | avg_sim=1.000 | interesting, fact...
      2. score=5.80 | 2 kw matches | avg_sim=0.731 | interesting fact, interesting fact...
      3. score=5.50 | 2 kw matches | avg_sim=0.731 | interesting fact, interesting fact...
   âœ… Returning 4 ranked results
   ğŸ”‘ Search query (keywords): 'cars interesting fact'
   âœ… Vector search successful, skipping keyword search

ğŸ“Š SEARCH RESULTS SUMMARY:
   Vector results: 4
   Keyword results: 0
   Total candidates: 4
   ğŸ“Œ Keeping high-similarity turn t_20251029_145928_72... (similarity=1.000) despite being in window
   ğŸ“Œ Keeping high-similarity turn t_20251029_145317_ae... (similarity=0.731) despite being in window
   ğŸ“Œ Keeping high-similarity turn t_20251029_144415_0a... (similarity=0.731) despite being in window
   âœ… Window tracking: 16 turns in window, 0 recently seen
âœ… Retrieved context: 3 snippets, 1 sources
      Retrieved 3 recent contexts
   ğŸ§  Step 3: Analyzing intent WITH context...
   ğŸ“… Found 4 active plans for context boosting
      Type: chat
      Keywords: ['cars', 'interesting fact']
      Topics: ['Automotive', 'Transportation']
   ğŸ“ Debug: User query logged to 01_user_query_20251029_150137_778.txt
   ğŸ·ï¸  Phase 4.1: Using GPT-4.1-nano topics...
      Topics: ['Automotive', 'Transportation']
   ğŸ” Step 4: Full context retrieval with refined intent...
      Using plan-boosted retrieval (4 active plans)
ğŸ” Crawler: Searching with intent:
   Query Type: chat
   Keywords: ['cars', 'interesting fact']
   Primary Topics: ['Automotive', 'Transportation']
ğŸ“‹ Found 0 active tasks
ğŸ“… Search range: ALL DAYS (unlimited)

ğŸ” VECTOR SEARCH (Primary Method):
   ğŸ” Ranked multi-keyword search: 'cars interesting fact Automotive Transportation...'
      Query keywords (5): ['cars', 'interesting', 'fact', 'Automotive', 'Transportation']
      Found 5 turns with keyword matches
   ğŸ¯ Top matches:
      1. score=7.68 | 3 kw matches | avg_sim=0.622 | interesting fact, interesting fact...
      2. score=6.05 | 2 kw matches | avg_sim=1.000 | interesting, fact...
      3. score=5.80 | 2 kw matches | avg_sim=0.731 | interesting fact, interesting fact...
   âœ… Returning 5 ranked results
   ğŸ”‘ Search query (keywords): 'cars interesting fact Automotive Transportation'
   âœ… Vector search successful, skipping keyword search

ğŸ“Š SEARCH RESULTS SUMMARY:
   Vector results: 5
   Keyword results: 0
   Total candidates: 5
   ğŸ“Œ Keeping high-similarity turn t_20251029_144415_0a... (similarity=0.622) despite being in window
   ğŸ“Œ Keeping high-similarity turn t_20251029_145928_72... (similarity=1.000) despite being in window
   ğŸ“Œ Keeping high-similarity turn t_20251029_145317_ae... (similarity=0.731) despite being in window
   âœ… Window tracking: 18 turns in window, 0 recently seen
âœ… Retrieved context: 5 snippets, 2 sources
      Retrieved: 5 contexts (before topic filtering)
   ğŸ” Phase 4.1: Filtering by active topics...
      Filtered: 5 â†’ 3 contexts
      Final context count: 3
   ğŸ“ Debug: Retrieved context logged to 02_retrieved_context_20251029_150137_778.txt
   ğŸ“ Debug: Sliding window logged to 03_sliding_window_20251029_150137_778.txt
   ğŸ’§ Building contextualized prompt...

ğŸ’§ Building prompt...
   ğŸ“Š Token allocation:
      System: 74 / 500
      Tasks: 0 / 500
      Window budget: 2955
      Retrieved budget: 1970
      ğŸ“Š Window formatting complete: 16/16 turns included, 0 omitted, 1476/2955 tokens used
   âœ… Prompt built:
      Total tokens: 1642 / 6000
      Window: 1339 tokens
      Retrieved: 208 tokens
      User: 21 tokens
      ğŸ“ Full prompt length: 6516 chars
      ğŸ“‹ Sliding window: 16 turns
   ğŸ“ Debug: Full prompt logged to 04_llm_prompt_20251029_150137_778.txt
   ğŸ¤– Calling LLM with context...
ğŸŒ Sending direct query to external API (model: gpt-4.1-mini)...
âœ… Chat response received
   ğŸ“Š Phase 4.1: Analyzing context usage...
      Citations found: 0
      Turn IDs used: set()
      Context efficiency: 0.0%

ğŸ’¬ Response: Certainly! Here's an interesting fact about cars: The world's first practical automobile powered by an internal combustion engine was built by Karl Benz in 1885. Known as the Benz Patent-Motorwagen, it had three wheels and a top speed of about 16 km/h (10 mph). This invention kickstarted the modern automotive industry and changed transportation forever. Todayâ€™s cars have evolved tremendously, with electric and hybrid models becoming increasingly popular as technology advances toward more sustainable mobility. Would you like to hear more about car history, technology, or trends?
   ğŸ“ Debug: LLM response logged to 05_llm_response_20251029_150137_778.txt
   ğŸ“ Using GPT-4.1-nano keywords (2): ['cars', 'interesting fact']
   ğŸ·ï¸  Using GPT-4.1-nano topics (2): ['Automotive', 'Transportation']
   ğŸ˜Š Detected affect: neutral
   ğŸ’¾ Logging turn to storage...
   ğŸ’¾ Logged turn t_20251029_150140_4ddc6f... (seq=0) to day 2025-10-29
      ğŸ”‘ Saved 2 keywords with lineage
      ğŸ˜Š Saved affect with lineage
   ğŸ“‹ Adding to sliding window...
   ğŸ’¾ Saved sliding window state: 17 turns
   âœ… Turn logged: t_20251029_150140_4ddc6f
   ğŸ” Generating embeddings from 2 LLM-extracted keywords...
   ğŸ” Generated 2 keyword embedding(s)
   ğŸ¯ Phase 4.3: Applying adaptive compression...
      ğŸ“Š Sliding window has 17 turns - checking compression...
      Compression decision: no_compression
      Reason: Related topics (distance: 0.465)
      â„¹ï¸  No compression needed
