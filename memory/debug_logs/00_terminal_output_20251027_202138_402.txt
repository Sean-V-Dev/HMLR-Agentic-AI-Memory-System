================================================================================
TERMINAL OUTPUT FOR THIS TURN
================================================================================
Timestamp: 2025-10-27 20:21:41
Turn ID: turn_20251027_202138_402
================================================================================

   ğŸ“ Debug: User query logged to 01_user_query_20251027_202138_402.txt
   ğŸ” Step 1: Quick keyword extraction...
      Quick keywords: ['interesting science', 'science fact', 'tell', 'interesting', 'science']
   ğŸ“š Step 2: Retrieving recent context...
ğŸ” Crawler: Searching with intent:
   Query Type: chat
   Keywords: ['interesting science', 'science fact', 'tell', 'interesting', 'science', 'fact']
ğŸ“‹ Found 0 active tasks
ğŸ“… Search range: ALL DAYS (unlimited)

ğŸ” VECTOR SEARCH (Primary Method):
   ğŸ” Ranked multi-keyword search: 'interesting science science fact tell interesting science fa...'
      Query keywords (8): ['interesting', 'science', 'science', 'fact', 'tell', 'interesting', 'science', 'fact']
      Found 8 turns with keyword matches
   ğŸ¯ Top matches:
      1. score=7.72 | 3 kw matches | avg_sim=0.446 | astrophysics, astrophysics...
      2. score=7.72 | 3 kw matches | avg_sim=0.444 | History, History...
      3. score=7.70 | 3 kw matches | avg_sim=0.433 | electronics, electronics...
   âœ… Returning 6 ranked results
   ğŸ”‘ Search query (keywords): 'interesting science science fact tell interesting science fact'
   âœ… Vector search successful, skipping keyword search

ğŸ“Š SEARCH RESULTS SUMMARY:
   Vector results: 6
   Keyword results: 0
   Total candidates: 6
   âœ… Window tracking: 6 turns in window, 0 recently seen
âœ… Retrieved context: 3 snippets, 1 sources
      Retrieved 3 recent contexts
   ğŸ§  Step 3: Analyzing intent WITH context...
   ğŸ“… Phase 6.2: Analyzing with plan context (1 active plans)
      Type: chat
      Keywords: ['tell', 'interesting', 'science', 'fact', 'context']
      Topics: ['exercise', 'challenge', 'rowing']
   ğŸ“ Debug: User query logged to 01_user_query_20251027_202138_402.txt
   ğŸ·ï¸  Phase 4.1: Extracting topics...
      Extracted topics: ['interesting science fact', 'interesting', 'science', 'fact']
   ğŸ” Step 4: Full context retrieval with refined intent...
      Using plan-boosted retrieval (1 active plans)
ğŸ” Crawler: Searching with intent:
   Query Type: chat
   Keywords: ['tell', 'interesting', 'science', 'fact', 'context', 'metadata', 'intent', 'understanding', 'conversation', 'depth']
   Primary Topics: ['exercise', 'challenge', 'rowing']
ğŸ“‹ Found 0 active tasks
ğŸ“… Search range: ALL DAYS (unlimited)

ğŸ” VECTOR SEARCH (Primary Method):
   ğŸ” Ranked multi-keyword search: 'tell interesting science fact context metadata intent unders...'
      Query keywords (13): ['tell', 'interesting', 'science', 'fact', 'context', 'metadata', 'intent', 'understanding', 'conversation', 'depth', 'exercise', 'challenge', 'rowing']
      Found 14 turns with keyword matches
   ğŸ¯ Top matches:
      1. score=9.47 | 4 kw matches | avg_sim=0.715 | Conversation, Metadata...
      2. score=7.28 | 3 kw matches | avg_sim=0.488 | fundamentals, data structures...
      3. score=5.36 | 2 kw matches | avg_sim=0.439 | History, History...
   âœ… Returning 10 ranked results
   ğŸ”‘ Search query (keywords): 'tell interesting science fact context metadata intent understanding conversation depth exercise challenge rowing'
   âœ… Vector search successful, skipping keyword search

ğŸ“Š SEARCH RESULTS SUMMARY:
   Vector results: 10
   Keyword results: 0
   Total candidates: 10
   ğŸ”„ Deduplicated turns: 10 â†’ 7 (3 skipped)
   âœ… Window tracking: 11 turns in window, 0 recently seen
âœ… Retrieved context: 5 snippets, 3 sources
      Retrieved: 5 contexts (before topic filtering)
   ğŸ” Phase 4.1: Filtering by active topics...
      Filtered: 5 â†’ 1 contexts
      Final context count: 1
   ğŸ“ Debug: Retrieved context logged to 02_retrieved_context_20251027_202138_402.txt
   ğŸ“ Debug: Sliding window logged to 03_sliding_window_20251027_202138_402.txt
   ğŸ’§ Building contextualized prompt...

ğŸ’§ Building prompt...
   ğŸ“Š Token allocation:
      System: 74 / 500
      Tasks: 0 / 500
      Window budget: 2955
      Retrieved budget: 1970
      ğŸ“Š Window formatting complete: 3/3 turns included, 0 omitted, 351/2955 tokens used
   âœ… Prompt built:
      Total tokens: 481 / 6000
      Window: 333 tokens
      Retrieved: 54 tokens
      User: 20 tokens
      ğŸ“ Full prompt length: 1873 chars
      ğŸ“‹ Sliding window: 3 turns
   ğŸ“ Debug: Full prompt logged to 04_llm_prompt_20251027_202138_402.txt
   ğŸ¤– Calling LLM with context...
ğŸŒ Sending direct query to external API...
âœ… Chat response received
   ğŸ“Š Phase 4.1: Analyzing context usage...
      Citations found: 0
      Turn IDs used: set()
      Context efficiency: 0.0%

ğŸ’¬ Response: Sure! Here's an interesting science fact: Did you know that water can exist in all three states of matterâ€”solid, liquid, and gasâ€”at the same time? This is called the **triple point** of water. It occurs at a very specific temperature and pressure (0.01Â°C and 611.657 pascals). At this point, ice, liquid water, and water vapor coexist in equilibrium. This phenomenon is used to calibrate thermometers because it's such a precise and reproducible condition! Would you like to hear another science fact or learn more about this one?
   ğŸ“ Debug: LLM response logged to 05_llm_response_20251027_202138_402.txt
   ğŸ“ Using inline metadata (LLM extraction disabled)...
   ğŸ’¾ Logging turn to storage...
   ğŸ’¾ Logged turn t_20251027_202141_40ff4d... (seq=0) to day 2025-10-27
   ğŸ“‹ Adding to sliding window...
   ğŸ’¾ Saved sliding window state: 4 turns
   âœ… Turn logged: t_20251027_202141_40ff4d
   âš ï¸ No keywords available for embedding
   ğŸ¯ Phase 4.3: Applying adaptive compression...
      ğŸ“Š Sliding window has 4 turns - checking compression...
      Compression decision: no_compression
      Reason: Related topics (distance: 0.000)
      â„¹ï¸  No compression needed
